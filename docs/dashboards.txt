# Documentação dos Endpoints de Dashboards

## 1. GET /api/v1/dashboards/expenses/by-category/

**Descrição:** Agrupa despesas por categoria pai para o gráfico de pizza.

**Autenticação:** Requerida (Bearer Token + X-Company-Token)

**Query Parameters:**
- `month` (opcional): Mês (1-12). Padrão: mês atual
- `year` (opcional): Ano. Padrão: ano atual

**Resposta JSON:**
```json
{
    "currency": "BRL",
    "year": 2025,
    "month": 11,
    "total_expenses": 15000.0,
    "categories": [
        {
            "category_id": "88f5fcf2-144e-4ba3-b918-cc4df562f383",
            "category_name": "Despesas de Atendimento",
            "amount": 8000.0,
            "percentage": 53.33
        },
        {
            "category_id": "06c55420-9fc1-442e-94ae-838e1e93fb7b",
            "category_name": "Despesas Operacionais",
            "amount": 7000.0,
            "percentage": 46.67
        }
    ]
}
```

**Campos:**
- `currency`: Moeda (sempre "BRL")
- `year`: Ano dos dados
- `month`: Mês dos dados
- `total_expenses`: Total de despesas no período
- `categories`: Array de categorias com:
  - `category_id`: UUID da categoria pai
  - `category_name`: Nome da categoria pai
  - `amount`: Valor total da categoria
  - `percentage`: Percentual em relação ao total (2 casas decimais)

---

## 2. GET /api/v1/dashboards/revenues/by-day/

**Descrição:** Soma receitas por dia dentro do mês para o gráfico de barras.

**Autenticação:** Requerida (Bearer Token + X-Company-Token)

**Query Parameters:**
- `month` (opcional): Mês (1-12). Padrão: mês atual
- `year` (opcional): Ano. Padrão: ano atual

**Resposta JSON:**
```json
{
    "currency": "BRL",
    "year": 2025,
    "month": 11,
    "total_revenue": 28000.0,
    "days": [
        {
            "date": "2025-11-22",
            "day": 23,
            "label": "23 novembro",
            "amount": 10000.0
        },
        {
            "date": "2025-11-24",
            "day": 25,
            "label": "25 novembro",
            "amount": 18000.0
        }
    ]
}
```

**Campos:**
- `currency`: Moeda (sempre "BRL")
- `year`: Ano dos dados
- `month`: Mês dos dados
- `total_revenue`: Total de receitas no período
- `days`: Array de dias com:
  - `date`: Data no formato ISO (YYYY-MM-DD)
  - `day`: Dia do mês (número)
  - `label`: Label formatado (ex: "23 novembro")
  - `amount`: Valor total do dia

---

## 3. GET /api/v1/dashboards/financial/summary/

**Descrição:** Valores agregados para contas a receber/pagar (atrasos e em aberto).

**Autenticação:** Requerida (Bearer Token + X-Company-Token)

**Query Parameters:** Nenhum (usa mês/ano atual automaticamente)

**Resposta JSON:**
```json
{
    "currency": "BRL",
    "year": 2025,
    "month": 12,
    "receivables_overdue": 0.0,
    "receivables_open": 13000.0,
    "receivables_open_current_month": 13000.0,
    "payables_overdue": 0.0
}
```

**Campos:**
- `currency`: Moeda (sempre "BRL")
- `year`: Ano de referência (ano atual)
- `month`: Mês de referência (mês atual)
- `receivables_overdue`: Total de contas a receber vencidas (Income + RecurringIncomeReceipt com status PENDENTE e due_date < hoje)
- `receivables_open`: Total de contas a receber em aberto (todas as Income + RecurringIncomeReceipt com status PENDENTE)
- `receivables_open_current_month`: Total de contas a receber em aberto do mês atual (Income + RecurringIncomeReceipt com status PENDENTE e due_date no mês/ano atual)
- `payables_overdue`: Total de contas a pagar vencidas (Bill + RecurringBillPayment com status A_VENCER/PENDENTE e due_date < hoje)

**Notas:**
- Os valores são calculados considerando:
  - **Receivables (Contas a Receber):** `Income` com status `PENDENTE` + `RecurringIncomeReceipt` com status `PENDENTE`
  - **Payables (Contas a Pagar):** `Bill` com status `A_VENCER` + `RecurringBillPayment` com status `PENDENTE`
- `receivables_overdue` e `payables_overdue` consideram apenas itens com `due_date` anterior à data atual
- `receivables_open_current_month` filtra por mês/ano atual

